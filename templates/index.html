{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
        <div class="card reveal">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="fas fa-cloud-upload-alt"></i>
                    Upload Audio File
                </h2>
                <p class="mb-0 mt-2 text-muted">Transform your audio into structured insights with our AI-powered pipeline</p>
            </div>
            <div class="card-body">
                <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" id="uploadForm">
                    <div class="file-upload-wrapper">
                        <div class="mb-4">
                            <i class="fas fa-file-audio text-primary mb-3" style="font-size: 3rem; opacity: 0.6;"></i>
                            <label for="file" class="form-label d-block mb-3">
                                <strong>Select an audio file to process</strong>
                            </label>
                            <input class="form-control mb-3" type="file" id="file" name="file" accept=".wav,.mp3,.flac,.ogg,.m4a" required>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>
                                Supported formats: <span class="badge bg-primary ms-1">WAV</span> <span class="badge bg-primary">MP3</span> <span class="badge bg-primary">FLAC</span> <span class="badge bg-primary">OGG</span> <span class="badge bg-primary">M4A</span>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
                            <i class="fas fa-magic me-2"></i>
                            Upload & Process
                        </button>
                        <div class="mt-3 text-muted small">
                            <i class="fas fa-lightning-bolt me-1"></i>
                            Processing typically takes 30-60 seconds
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="card mt-4 reveal">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-cogs"></i>
                    Processing Pipeline
                </h3>
                <p class="mb-0 mt-2 text-muted">Your audio will go through these intelligent processing steps</p>
            </div>
            <div class="card-body">
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="processing-step">
                            <div class="step-icon me-3">
                                <i class="fas fa-volume-up text-primary"></i>
                            </div>
                            <div>
                                <h5 class="mb-1">Audio Cleaning</h5>
                                <p class="mb-0 text-muted small">Removes silence and normalizes volume</p>
                            </div>
                        </div>
                        
                        <div class="processing-step">
                            <div class="step-icon me-3">
                                <i class="fas fa-microphone text-success"></i>
                            </div>
                            <div>
                                <h5 class="mb-1">Speech Transcription</h5>
                                <p class="mb-0 text-muted small">Converts speech to text using AI</p>
                            </div>
                        </div>

                        <div class="processing-step">
                            <div class="step-icon me-3">
                                <i class="fas fa-eraser text-warning"></i>
                            </div>
                            <div>
                                <h5 class="mb-1">Text Cleaning</h5>
                                <p class="mb-0 text-muted small">Removes filler words and normalizes text</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="processing-step">
                            <div class="step-icon me-3">
                                <i class="fas fa-tags text-info"></i>
                            </div>
                            <div>
                                <h5 class="mb-1">Named Entity Recognition</h5>
                                <p class="mb-0 text-muted small">Identifies people, organizations, locations</p>
                            </div>
                        </div>

                        <div class="processing-step">
                            <div class="step-icon me-3">
                                <i class="fas fa-compress-alt text-secondary"></i>
                            </div>
                            <div>
                                <h5 class="mb-1">Text Summarization</h5>
                                <p class="mb-0 text-muted small">Creates summaries of different lengths</p>
                            </div>
                        </div>

                        <div class="processing-step">
                            <div class="step-icon me-3">
                                <i class="fas fa-chart-bar text-purple"></i>
                            </div>
                            <div>
                                <h5 class="mb-1">Results Analysis</h5>
                                <p class="mb-0 text-muted small">Organized insights and visualizations</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features showcase -->
        <div class="row mt-4">
            <div class="col-md-4 mb-3">
                <div class="card h-100 text-center reveal">
                    <div class="card-body">
                        <i class="fas fa-robot text-primary mb-3" style="font-size: 2.5rem;"></i>
                        <h5>AI-Powered</h5>
                        <p class="text-muted small">Advanced machine learning for accurate transcription and analysis</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card h-100 text-center reveal">
                    <div class="card-body">
                        <i class="fas fa-clock text-success mb-3" style="font-size: 2.5rem;"></i>
                        <h5>Fast Processing</h5>
                        <p class="text-muted small">Quick turnaround times with efficient processing algorithms</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="card h-100 text-center reveal">
                    <div class="card-body">
                        <i class="fas fa-shield-alt text-warning mb-3" style="font-size: 2.5rem;"></i>
                        <h5>Secure & Private</h5>
                        <p class="text-muted small">Your audio files are processed securely and not stored permanently</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.processing-step {
    background: transparent;
    border: none;
    border-left: 3px solid transparent;
    transition: all 0.3s ease;
    padding: 1rem;
    border-radius: 8px;
}

.processing-step:hover {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
    border-left-color: #667eea;
    transform: translateX(5px);
}

.step-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    flex-shrink: 0;
}

.step-icon i {
    font-size: 1.2rem;
}

.badge {
    font-size: 0.75rem;
    padding: 0.35em 0.65em;
}

.text-purple {
    color: #8b5fbf !important;
}

.btn-lg {
    padding: 1rem 2.5rem;
    font-size: 1.1rem;
}

@media (max-width: 768px) {
    .processing-step {
        padding: 0.75rem;
    }
    
    .step-icon {
        width: 35px;
        height: 35px;
    }
    
    .step-icon i {
        font-size: 1rem;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('uploadForm');
    const submitBtn = document.getElementById('submitBtn');
    const fileInput = document.getElementById('file');
    
    form.addEventListener('submit', function(e) {
        if (!fileInput.files.length) {
            e.preventDefault();
            return;
        }
        
        submitBtn.innerHTML = '<span class="loading me-2"></span>Processing...';
        submitBtn.disabled = true;
    });
    
    // File selection feedback
    fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const label = document.querySelector('label[for="file"]');
            label.innerHTML = `<i class="fas fa-file-audio text-success me-2"></i><strong>Selected: ${file.name}</strong>`;
        }
    });
});
</script>
{% endblock %}